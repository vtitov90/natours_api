{"mappings":"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","sources":["<anon>","public/js/index.js","public/js/mapbox.js","public/js/login.js","public/js/alert.js","public/js/signup.js","public/js/updateSettings.js","public/js/stripe.js"],"sourcesContent":["/* eslint-disable */ /* eslint-disable */ const $3fd5f21c4d90e9f9$export$4c5dd147b21b9176 = (locations)=>{\n    mapboxgl.accessToken = \"pk.eyJ1IjoidnRpdG92OTAiLCJhIjoiY2x2YXVsZDhyMDJrdjJqbnZ3dDMwaGx0YSJ9.TWHnYaB5878fjLQDh8opzQ\";\n    const map = new mapboxgl.Map({\n        container: \"map\",\n        style: \"mapbox://styles/vtitov90/clvawxa4g00s601ph86vp77n2\",\n        scrollZoom: false\n    });\n    const bounds = new mapboxgl.LngLatBounds();\n    locations.forEach((loc)=>{\n        // Create marker\n        const el = document.createElement(\"div\");\n        el.className = \"marker\";\n        // Add marker\n        new mapboxgl.Marker({\n            element: el,\n            anchor: \"bottom\"\n        }).setLngLat(loc.coordinates).addTo(map);\n        // Add popup\n        new mapboxgl.Popup({\n            offset: 30,\n            focusAfterOpen: false\n        }).setLngLat(loc.coordinates).setHTML(`<p>Day ${loc.day}: ${loc.description}</p>`).addTo(map);\n        // Extend map bounds to include current location\n        bounds.extend(loc.coordinates);\n    });\n    map.fitBounds(bounds, {\n        padding: {\n            top: 200,\n            bottom: 150,\n            left: 100,\n            right: 100\n        }\n    });\n};\n\n\n/* eslint-disable */ /* eslint-disable */ const $9873dc3e4e4f0ecb$export$516836c6a9dfc573 = ()=>{\n    const el = document.querySelector(\".alert\");\n    if (el) el.remove();\n};\nconst $9873dc3e4e4f0ecb$export$de026b00723010c1 = (type, message, time = 4)=>{\n    $9873dc3e4e4f0ecb$export$516836c6a9dfc573();\n    const markup = `<div class=\"alert alert--${type}\">${message}</div>`;\n    document.querySelector(\"body\").insertAdjacentHTML(\"afterbegin\", markup);\n    window.setTimeout($9873dc3e4e4f0ecb$export$516836c6a9dfc573, time * 1000);\n};\n\n\nconst $7cb10a2592f0346c$export$596d806903d1f59e = async (email, password)=>{\n    try {\n        const res = await axios({\n            method: \"POST\",\n            url: \"/api/v1/users/login\",\n            data: {\n                email: email,\n                password: password\n            }\n        });\n        if (res.data.status === \"success\") {\n            (0, $9873dc3e4e4f0ecb$export$de026b00723010c1)(\"success\", \"Logged in successfully\");\n            window.setTimeout(()=>{\n                location.assign(\"/\");\n            }, 700);\n        }\n    } catch (err) {\n        (0, $9873dc3e4e4f0ecb$export$de026b00723010c1)(\"error\", err.response.data.message);\n    }\n};\nconst $7cb10a2592f0346c$export$a0973bcfe11b05c9 = async ()=>{\n    try {\n        const res = await axios({\n            method: \"GET\",\n            url: \"/api/v1/users/logout\"\n        });\n        if (res.data.status === \"success\") location.reload(true);\n    // window.setTimeout(() => {\n    //   location.assign('/');\n    // }, 700);\n    } catch (err) {\n        (0, $9873dc3e4e4f0ecb$export$de026b00723010c1)(\"error\", \"Error logging out! Try again.\");\n    }\n};\n\n\n/* eslint-disable */ \nconst $833280dd92a6bb77$export$7200a869094fec36 = async (name, email, password, passwordConfirm)=>{\n    try {\n        const res = await axios({\n            method: \"POST\",\n            url: \"/api/v1/users/signup\",\n            data: {\n                name: name,\n                email: email,\n                password: password,\n                passwordConfirm: passwordConfirm\n            }\n        });\n        if (res.data.status === \"success\") {\n            (0, $9873dc3e4e4f0ecb$export$de026b00723010c1)(\"success\", \"Signed up successfully\");\n            window.setTimeout(()=>{\n                location.assign(\"/\");\n            }, 700);\n        }\n    } catch (err) {\n        (0, $9873dc3e4e4f0ecb$export$de026b00723010c1)(\"error\", err.response.data.message);\n    }\n};\n\n\n/* eslint-disable */ \nconst $5079fd94aa2a3f3c$export$f558026a994b6051 = async (data, type)=>{\n    try {\n        const url = type === \"password\" ? \"/api/v1/users/updateMyPassword\" : \"/api/v1/users/updateMe\";\n        const res = await axios({\n            method: \"PATCH\",\n            url: url,\n            data: data\n        });\n        if (res.data.status === \"success\") {\n            (0, $9873dc3e4e4f0ecb$export$de026b00723010c1)(\"success\", `${type.toUpperCase()} updated successfully!`);\n            window.setTimeout(()=>{\n                location.reload();\n            }, 700);\n        }\n    } catch (err) {\n        (0, $9873dc3e4e4f0ecb$export$de026b00723010c1)(\"error\", err.response.data.message);\n    }\n};\n\n\n/* eslint-disable */ \nconst $3a8ea16f6624cf00$export$8d5bdbf26681c0c2 = async (tourId)=>{\n    try {\n        const session = await axios(`/api/v1/bookings/checkout-session/${tourId}`);\n        location.assign(session.data.session.url);\n    } catch (err) {\n        var _err_response;\n        console.error(\"Booking error:\", err);\n        const errorMessage = ((_err_response = err.response) === null || _err_response === void 0 ? void 0 : _err_response.status) === 409 ? \"You have already booked this tour\" : \"An error occurred while booking the tour\";\n        (0, $9873dc3e4e4f0ecb$export$de026b00723010c1)(\"error\", errorMessage);\n    }\n};\n\n\n\n// DOM ELEMENTS\nconst $27293c0f7cb99d43$var$mapBox = document.getElementById(\"map\");\nconst $27293c0f7cb99d43$var$loginForm = document.querySelector(\".form--login\");\nconst $27293c0f7cb99d43$var$logOutBtn = document.querySelector(\".nav__el--logout\");\nconst $27293c0f7cb99d43$var$userDataForm = document.querySelector(\".form-user-data\");\nconst $27293c0f7cb99d43$var$userPasswordForm = document.querySelector(\".form-user-password\");\nconst $27293c0f7cb99d43$var$bookBtn = document.getElementById(\"book-tour\");\n// DELEGATION\nif ($27293c0f7cb99d43$var$mapBox) {\n    const locations = JSON.parse($27293c0f7cb99d43$var$mapBox.dataset.locations);\n    (0, $3fd5f21c4d90e9f9$export$4c5dd147b21b9176)(locations);\n}\nif ($27293c0f7cb99d43$var$loginForm) $27293c0f7cb99d43$var$loginForm.addEventListener(\"submit\", function(e) {\n    e.preventDefault();\n    const password = document.getElementById(\"password\").value;\n    const email = document.getElementById(\"email\").value;\n    if (document.getElementById(\"name\") && document.getElementById(\"confirm-password\")) {\n        const name = document.getElementById(\"name\").value;\n        const passwordConfirm = document.getElementById(\"confirm-password\").value;\n        (0, $833280dd92a6bb77$export$7200a869094fec36)(name, email, password, passwordConfirm);\n    } else (0, $7cb10a2592f0346c$export$596d806903d1f59e)(email, password);\n});\nif ($27293c0f7cb99d43$var$logOutBtn) $27293c0f7cb99d43$var$logOutBtn.addEventListener(\"click\", (0, $7cb10a2592f0346c$export$a0973bcfe11b05c9));\nif ($27293c0f7cb99d43$var$userDataForm) $27293c0f7cb99d43$var$userDataForm.addEventListener(\"submit\", (e)=>{\n    e.preventDefault();\n    const form = new FormData();\n    form.append(\"name\", document.getElementById(\"name\").value);\n    form.append(\"email\", document.getElementById(\"email\").value);\n    form.append(\"photo\", document.getElementById(\"photo\").files[0]);\n    (0, $5079fd94aa2a3f3c$export$f558026a994b6051)(form, \"data\");\n});\nif ($27293c0f7cb99d43$var$userPasswordForm) $27293c0f7cb99d43$var$userPasswordForm.addEventListener(\"submit\", async (e)=>{\n    e.preventDefault();\n    document.querySelector(\".btn--save-password\").textContent = \"Updating...\";\n    const passwordCurrent = document.getElementById(\"password-current\").value;\n    const password = document.getElementById(\"password\").value;\n    const passwordConfirm = document.getElementById(\"password-confirm\").value;\n    await (0, $5079fd94aa2a3f3c$export$f558026a994b6051)({\n        passwordCurrent: passwordCurrent,\n        password: password,\n        passwordConfirm: passwordConfirm\n    }, \"password\");\n    document.querySelector(\".btn--save-password\").textContent = \"Save password\";\n    document.getElementById(\"password-current\").value = \"\";\n    document.getElementById(\"password\").value = \"\";\n    document.getElementById(\"password-confirm\").value = \"\";\n});\nif ($27293c0f7cb99d43$var$bookBtn) $27293c0f7cb99d43$var$bookBtn.addEventListener(\"click\", (e)=>{\n    e.target.textContent = \"Processing...\";\n    const { tourId: tourId } = e.target.dataset;\n    (0, $3a8ea16f6624cf00$export$8d5bdbf26681c0c2)(tourId);\n});\nconst $27293c0f7cb99d43$var$alertMessage = document.querySelector(\"body\").dataset.alert;\nif ($27293c0f7cb99d43$var$alertMessage) (0, $9873dc3e4e4f0ecb$export$de026b00723010c1)(\"success\", $27293c0f7cb99d43$var$alertMessage, 15);\n\n\n//# sourceMappingURL=index.js.map\n","/* eslint-disable */\r\nimport 'regenerator-runtime/runtime.js';\r\nimport { displayMap } from './mapbox';\r\nimport { login, logout } from './login';\r\nimport { signup } from './signup';\r\nimport { updateSettings } from './updateSettings';\r\nimport { bookTour } from './stripe';\r\nimport { showAlert } from './alert';\r\n\r\n// DOM ELEMENTS\r\nconst mapBox = document.getElementById('map');\r\nconst loginForm = document.querySelector('.form--login');\r\nconst logOutBtn = document.querySelector('.nav__el--logout');\r\nconst userDataForm = document.querySelector('.form-user-data');\r\nconst userPasswordForm = document.querySelector('.form-user-password');\r\nconst bookBtn = document.getElementById('book-tour');\r\n// DELEGATION\r\nif (mapBox) {\r\n  const locations = JSON.parse(mapBox.dataset.locations);\r\n  displayMap(locations);\r\n}\r\n\r\nif (loginForm) {\r\n  loginForm.addEventListener('submit', function (e) {\r\n    e.preventDefault();\r\n    const password = document.getElementById('password').value;\r\n    const email = document.getElementById('email').value;\r\n    if (\r\n      document.getElementById('name') &&\r\n      document.getElementById('confirm-password')\r\n    ) {\r\n      const name = document.getElementById('name').value;\r\n      const passwordConfirm = document.getElementById('confirm-password').value;\r\n      signup(name, email, password, passwordConfirm);\r\n    } else {\r\n      login(email, password);\r\n    }\r\n  });\r\n}\r\n\r\nif (logOutBtn) logOutBtn.addEventListener('click', logout);\r\n\r\nif (userDataForm)\r\n  userDataForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    const form = new FormData();\r\n    form.append('name', document.getElementById('name').value);\r\n    form.append('email', document.getElementById('email').value);\r\n    form.append('photo', document.getElementById('photo').files[0]);\r\n    updateSettings(form, 'data');\r\n  });\r\n\r\nif (userPasswordForm)\r\n  userPasswordForm.addEventListener('submit', async (e) => {\r\n    e.preventDefault();\r\n    document.querySelector('.btn--save-password').textContent = 'Updating...';\r\n    const passwordCurrent = document.getElementById('password-current').value;\r\n    const password = document.getElementById('password').value;\r\n    const passwordConfirm = document.getElementById('password-confirm').value;\r\n    await updateSettings(\r\n      { passwordCurrent, password, passwordConfirm },\r\n      'password',\r\n    );\r\n    document.querySelector('.btn--save-password').textContent = 'Save password';\r\n    document.getElementById('password-current').value = '';\r\n    document.getElementById('password').value = '';\r\n    document.getElementById('password-confirm').value = '';\r\n  });\r\n\r\nif (bookBtn) {\r\n  bookBtn.addEventListener('click', (e) => {\r\n    e.target.textContent = 'Processing...';\r\n    const { tourId } = e.target.dataset;\r\n    bookTour(tourId);\r\n  });\r\n}\r\n\r\nconst alertMessage = document.querySelector('body').dataset.alert;\r\n\r\nif (alertMessage) {\r\n  showAlert('success', alertMessage, 15);\r\n}\r\n","/* eslint-disable */\r\n\r\nexport const displayMap = (locations) => {\r\n  mapboxgl.accessToken =\r\n    'pk.eyJ1IjoidnRpdG92OTAiLCJhIjoiY2x2YXVsZDhyMDJrdjJqbnZ3dDMwaGx0YSJ9.TWHnYaB5878fjLQDh8opzQ';\r\n  const map = new mapboxgl.Map({\r\n    container: 'map', // container ID\r\n    style: 'mapbox://styles/vtitov90/clvawxa4g00s601ph86vp77n2', // style URL\r\n    scrollZoom: false,\r\n    // center: [-118.113491, 34.111745], // starting position [lng, lat]\r\n    // zoom: 9, // starting zoom\r\n    // interactive: false, // allow to rotate the map\r\n  });\r\n\r\n  const bounds = new mapboxgl.LngLatBounds();\r\n\r\n  locations.forEach((loc) => {\r\n    // Create marker\r\n    const el = document.createElement('div');\r\n    el.className = 'marker';\r\n\r\n    // Add marker\r\n    new mapboxgl.Marker({\r\n      element: el,\r\n      anchor: 'bottom',\r\n    })\r\n      .setLngLat(loc.coordinates)\r\n      .addTo(map);\r\n\r\n    // Add popup\r\n    new mapboxgl.Popup({ offset: 30, focusAfterOpen: false })\r\n      .setLngLat(loc.coordinates)\r\n      .setHTML(`<p>Day ${loc.day}: ${loc.description}</p>`)\r\n      .addTo(map);\r\n\r\n    // Extend map bounds to include current location\r\n    bounds.extend(loc.coordinates);\r\n  });\r\n\r\n  map.fitBounds(bounds, {\r\n    padding: {\r\n      top: 200,\r\n      bottom: 150,\r\n      left: 100,\r\n      right: 100,\r\n    },\r\n  });\r\n};\r\n","/* eslint-disable */\r\nimport { showAlert } from './alert';\r\nexport const login = async (email, password) => {\r\n  try {\r\n    const res = await axios({\r\n      method: 'POST',\r\n      url: '/api/v1/users/login',\r\n      data: {\r\n        email,\r\n        password,\r\n      },\r\n    });\r\n\r\n    if (res.data.status === 'success') {\r\n      showAlert('success', 'Logged in successfully');\r\n      window.setTimeout(() => {\r\n        location.assign('/');\r\n      }, 700);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', err.response.data.message);\r\n  }\r\n};\r\n\r\nexport const logout = async () => {\r\n  try {\r\n    const res = await axios({\r\n      method: 'GET',\r\n      url: '/api/v1/users/logout',\r\n    });\r\n\r\n    if (res.data.status === 'success') location.reload(true);\r\n    // window.setTimeout(() => {\r\n    //   location.assign('/');\r\n    // }, 700);\r\n  } catch (err) {\r\n    showAlert('error', 'Error logging out! Try again.');\r\n  }\r\n};\r\n","/* eslint-disable */\r\n\r\nexport const hideAlert = () => {\r\n  const el = document.querySelector('.alert');\r\n  if (el) {\r\n    el.remove();\r\n  }\r\n};\r\n\r\n// type is 'success' or 'error'\r\nexport const showAlert = (type, message, time = 4) => {\r\n  hideAlert();\r\n  const markup = `<div class=\"alert alert--${type}\">${message}</div>`;\r\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\r\n  window.setTimeout(hideAlert, time * 1000);\r\n};\r\n","/* eslint-disable */\r\nimport { showAlert } from './alert';\r\n\r\nexport const signup = async (name, email, password, passwordConfirm) => {\r\n  try {\r\n    const res = await axios({\r\n      method: 'POST',\r\n      url: '/api/v1/users/signup',\r\n      data: {\r\n        name,\r\n        email,\r\n        password,\r\n        passwordConfirm,\r\n      },\r\n    });\r\n    if (res.data.status === 'success') {\r\n      showAlert('success', 'Signed up successfully');\r\n      window.setTimeout(() => {\r\n        location.assign('/');\r\n      }, 700);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', err.response.data.message);\r\n  }\r\n};\r\n","/* eslint-disable */\r\nimport { showAlert } from './alert';\r\n\r\n// type is either 'password' or 'data'\r\nexport const updateSettings = async (data, type) => {\r\n  try {\r\n    const url =\r\n      type === 'password'\r\n        ? '/api/v1/users/updateMyPassword'\r\n        : '/api/v1/users/updateMe';\r\n\r\n    const res = await axios({\r\n      method: 'PATCH',\r\n      url,\r\n      data,\r\n    });\r\n\r\n    if (res.data.status === 'success') {\r\n      showAlert('success', `${type.toUpperCase()} updated successfully!`);\r\n      window.setTimeout(() => {\r\n        location.reload();\r\n      }, 700);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', err.response.data.message);\r\n  }\r\n};\r\n","/* eslint-disable */\r\nimport { showAlert } from './alert';\r\n\r\nexport const bookTour = async (tourId) => {\r\n  try {\r\n    const session = await axios(`/api/v1/bookings/checkout-session/${tourId}`);\r\n    location.assign(session.data.session.url);\r\n  } catch (err) {\r\n    console.error('Booking error:', err);\r\n\r\n    const errorMessage =\r\n      err.response?.status === 409\r\n        ? 'You have already booked this tour'\r\n        : 'An error occurred while booking the tour';\r\n    showAlert('error', errorMessage);\r\n  }\r\n};\r\n"],"names":["$9873dc3e4e4f0ecb$export$516836c6a9dfc573","el","document","querySelector","remove","$9873dc3e4e4f0ecb$export$de026b00723010c1","type","message","time","markup","insertAdjacentHTML","window","setTimeout","$7cb10a2592f0346c$export$596d806903d1f59e","email","password","res","axios","method","url","data","status","location","assign","err","response","$7cb10a2592f0346c$export$a0973bcfe11b05c9","reload","$833280dd92a6bb77$export$7200a869094fec36","name","passwordConfirm","$5079fd94aa2a3f3c$export$f558026a994b6051","toUpperCase","$3a8ea16f6624cf00$export$8d5bdbf26681c0c2","tourId","session","_err_response","console","error","$27293c0f7cb99d43$var$mapBox","getElementById","$27293c0f7cb99d43$var$loginForm","$27293c0f7cb99d43$var$logOutBtn","$27293c0f7cb99d43$var$userDataForm","$27293c0f7cb99d43$var$userPasswordForm","$27293c0f7cb99d43$var$bookBtn","locations","mapboxgl","accessToken","map","Map","container","style","scrollZoom","bounds","LngLatBounds","forEach","loc","createElement","className","Marker","element","anchor","setLngLat","coordinates","addTo","Popup","offset","focusAfterOpen","setHTML","day","description","extend","fitBounds","padding","top","bottom","left","right","JSON","parse","dataset","addEventListener","e","preventDefault","value","form","FormData","append","files","textContent","passwordCurrent","target","$27293c0f7cb99d43$var$alertMessage","alert"],"version":3,"file":"index.js.map","sourceRoot":"../../../"}